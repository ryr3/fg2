!function e(t,n,i){function o(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return o(n?n:e)},c,c.exports,e,t,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var o=e("./states/boot"),r=i(o),a=e("./states/gameover"),s=i(a),l=e("./states/preloader"),u=i(l),c=e("./states/level1/level1"),h=i(c),f=new Phaser.Game(window.innerWidth,window.innerHeight,Phaser.AUTO,"panda-game");f.state.add("boot",new r.default),f.state.add("gameover",new s.default),f.state.add("preloader",new u.default),f.state.add("level1",new h.default),f.state.start("boot")},{"./states/boot":8,"./states/gameover":9,"./states/level1/level1":13,"./states/preloader":15}],2:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e){function t(e,n,r,a,s,l){i(this,t);var u=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,a,s,l));return u.name=l,u.game.physics.arcade.enableBody(u),u.body.allowGravity=!1,u.body.immovable=!0,u.edges=[new Phaser.Line(n,r,n+a,r),new Phaser.Line(n,r,n,r+s),new Phaser.Line(n+a,r,n+a,r+s),new Phaser.Line(n,r+s,n+a,r+s)],u}return r(t,e),a(t,[{key:"preload",value:function(){}},{key:"create",value:function(){}},{key:"update",value:function(){}},{key:"getEdges",value:function(){return this.edges}},{key:"paused",value:function(){}},{key:"render",value:function(){}},{key:"shutdown",value:function(){}}]),t}(Phaser.TileSprite);n.default=s},{}],3:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=e("../utils/raycaster"),u=i(l),c=function(e){function t(e,n,i,a,s){o(this,t);var l=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,"crosshairs",s));return l.game.physics.arcade.enableBody(l),l.body.velocity.set(a.x,a.y),l.initVelocity=a,l.raycaster=new u.default,l.losToPlayer=null,l.maxTimeToFire=600,l.timeToFire=1/0,l.maxTimeToSee=400,l.timeToSee=1/0,l.isShooting=!1,l.weapon=e.add.weapon(2,"bullet"),l.weapon.bulletKillType=Phaser.Weapon.KILL_CAMERA_BOUNDS,l.weapon.bulletSpeed=3e3,l.weapon.bulletGravity.set(0),l.weapon.trackSprite(l,l.width,l.height/2),l}return a(t,e),s(t,[{key:"preload",value:function(){}},{key:"create",value:function(){}},{key:"update",value:function(){if(this.isShooting===!0){if(!(this.timeToSee<=0))return void(this.timeToSee-=this.game.time.physicsElapsedMS);this.timeToSee=1/0,this.timeToFire=this.maxTimeToFire-this.maxTimeToSee,this.isShooting=!1}this.sightCheck(),this.timeToFire<=0&&this.fireBullet()}},{key:"sightCheck",value:function(){if(this.inCamera){var e=[],t=!0,n=!1,i=void 0;try{for(var o,r=this.obstacles[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value;a.inCamera&&e.push(a)}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}var s=new Phaser.Point(this.body.position.x+this.width/2,this.body.position.y+this.height/2),l=this.player.getCenter();this.raycaster.castRay(s,l,e)?(this.losToPlayer=null,this.timeToFire=1/0):(null!==this.losToPlayer&&this.timeToFire!==1/0?this.timeToFire-=this.game.time.physicsElapsedMS:this.timeToFire=this.maxTimeToFire,this.losToPlayer=new Phaser.Line(s.x,s.y,l.x,l.y))}}},{key:"fireBullet",value:function(){var e=this.player.getCenter();this.weapon.fireAtXY(e.x,e.y),this.weapon.bullets.children[this.weapon.bullets.children.length-1].body.allowGravity=!1,this.isShooting=!0,this.timeToSee=this.maxTimeToSee}},{key:"cacheObstacles",value:function(e){this.obstacles=e}},{key:"cachePlayer",value:function(e){this.player=e}},{key:"reverseDirection",value:function(e){e.body.position.x>this.body.position.x?this.body.velocity.set(-this.initVelocity.x,this.initVelocity.y):this.body.velocity.set(this.initVelocity.x,this.initVelocity.y)}},{key:"paused",value:function(){}},{key:"render",value:function(){}},{key:"shutdown",value:function(){}},{key:"eliminate",value:function(){this.losToPlayer=null,this.timeToFire=1/0,this.timeToSee=1/0,this.isShooting=!1,this.destroy()}}]),t}(Phaser.Sprite);n.default=c},{"../utils/raycaster":16}],4:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e){function t(e,n,r,a,s,l){i(this,t);var u=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,null,l));return u.renderable=!1,u.width=a,u.height=s,u.game.physics.arcade.enableBody(u),u.body.allowGravity=!1,u.body.immovable=!0,u}return r(t,e),a(t,[{key:"preload",value:function(){}},{key:"create",value:function(){}},{key:"update",value:function(){}},{key:"paused",value:function(){}},{key:"render",value:function(){}},{key:"shutdown",value:function(){}}]),t}(Phaser.Sprite);n.default=s},{}],5:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e){function t(e,n,r,a,s,l){i(this,t);var u=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,a,s,l));return u.name=l,u.game.physics.arcade.enableBody(u),u.body.allowGravity=!1,u.body.immovable=!0,u.edges=[new Phaser.Line(n,r,n+a,r),new Phaser.Line(n,r,n,r+s),new Phaser.Line(n+a,r,n+a,r+s),new Phaser.Line(n,r+s,n+a,r+s)],u}return r(t,e),a(t,[{key:"preload",value:function(){}},{key:"create",value:function(){}},{key:"update",value:function(){}},{key:"getEdges",value:function(){return this.edges}},{key:"paused",value:function(){}},{key:"render",value:function(){}},{key:"shutdown",value:function(){}}]),t}(Phaser.TileSprite);n.default=s},{}],6:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e){function t(e,n,r,a){i(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,"crosshairs",a));return s.accelerationMagnitude=1400,s.jumping=!1,s.keyPressCount=0,s.isFacingRight=!0,s.game.physics.arcade.enableBody(s),s.body.maxVelocity=new Phaser.Point(400,1e3),s.friction=1400,s.body.collideWorldBounds=!0,s.anchor.setTo(.5,0),s.game.global.controls.up.onDown.add(function(){s.increaseKeyPressCount(),s.jumping===!1&&(s.jumping=!0,s.body.velocity.y=-s.body.maxVelocity.y)},s),s.game.global.controls.attack.onDown.add(function(){s.increaseKeyPressCount(),s.sword.revive()},s),s.game.global.controls.down.onDown.add(s.increaseKeyPressCount,s),s.game.global.controls.left.onDown.add(s.increaseKeyPressCount,s),s.game.global.controls.right.onDown.add(s.increaseKeyPressCount,s),s.game.global.controls.attack.onUp.add(function(){s.decreaseKeyPressCount(),s.sword.kill()},s),s.game.global.controls.up.onUp.add(s.decreaseKeyPressCount,s),s.game.global.controls.down.onUp.add(s.decreaseKeyPressCount,s),s.game.global.controls.left.onUp.add(s.decreaseKeyPressCount,s),s.game.global.controls.right.onUp.add(s.decreaseKeyPressCount,s),s}return r(t,e),a(t,[{key:"preload",value:function(){}},{key:"create",value:function(){}},{key:"update",value:function(){this.game.camera.follow(this);var e=this.game.global.controls;e.down.isDown&&(this.body.velocity.y+=this.accelerationMagnitude*this.game.time.physicsElapsed),e.left.isDown&&(e.right.isUp||e.left.timeDown>e.right.timeDown)?(this.body.velocity.x-=this.accelerationMagnitude*this.game.time.physicsElapsed,this.isFacingRight=!1):e.right.isDown?(this.body.velocity.x+=this.accelerationMagnitude*this.game.time.physicsElapsed,this.isFacingRight=!0):e.left.isUp&&this.body.velocity.x<0?this.body.velocity.x=Math.min(0,this.body.velocity.x+this.friction*this.game.time.physicsElapsed):e.right.isUp&&this.body.velocity.x>0&&(this.body.velocity.x=Math.max(0,this.body.velocity.x-this.friction*this.game.time.physicsElapsed)),0===this.keyPressCount?(this.game.time.slowMotion=this.game.global.slowdown,this.game.global.isSlowdown=!0):(this.game.time.slowMotion=1,this.game.global.isSlowdown=!1),this.isFacingRight===!1?this.scale.x=-1:this.scale.x=1}},{key:"getCenter",value:function(){var e=this.body.position.clone();return e.x+=Math.abs(this.width/2),e.y+=this.height/2,e}},{key:"grounded",value:function(e,t){t.body.position.y>=e.body.bottom&&(this.jumping=!1)}},{key:"increaseKeyPressCount",value:function(){this.keyPressCount++}},{key:"decreaseKeyPressCount",value:function(){this.keyPressCount--}},{key:"paused",value:function(){}},{key:"render",value:function(){}},{key:"shutdown",value:function(){}}]),t}(Phaser.Sprite);n.default=s},{}],7:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e){function t(e,n,r,a){i(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,"bullet",a));return s.game.physics.arcade.enableBody(s),s.body.allowGravity=!1,s.body.immovable=!0,s}return r(t,e),a(t,[{key:"preload",value:function(){}},{key:"create",value:function(){}},{key:"update",value:function(){}},{key:"paused",value:function(){}},{key:"render",value:function(){}},{key:"shutdown",value:function(){}}]),t}(Phaser.Sprite);n.default=s},{}],8:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return r(t,e),a(t,[{key:"preload",value:function(){this.load.image("preloader","assets/preloader.gif")}},{key:"create",value:function(){this.game.input.maxPointers=1,this.game.device.desktop?this.game.scale.pageAlignHorizontally=!0:(this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.minWidth=480,this.game.scale.minHeight=260,this.game.scale.maxWidth=640,this.game.scale.maxHeight=480,this.game.scale.forceOrientation(!0),this.game.scale.pageAlignHorizontally=!0,this.game.scale.setScreenSize(!0)),this.initGlobalVariables(),this.game.state.start("preloader")}},{key:"initGlobalVariables",value:function(){this.game.global={score:0,slowdown:13,isSlowdown:!0},this.game.global.controls=Object.assign(this.game.input.keyboard.createCursorKeys(),{attack:this.game.input.keyboard.addKey(Phaser.Keyboard.X)})}}]),t}(Phaser.State);n.default=s},{}],9:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return r(t,e),a(t,[{key:"create",value:function(){this.gameoverText=this.add.text(this.game.camera.width/2,this.game.camera.height/2,"You died :(\nClick to restart",{font:"42px Arial",fill:"#ffffff",align:"center"}),this.gameoverText.anchor.set(.5),this.input.onDown.add(this.onInputDown,this),this.canContinueToNextState=!1,this.game.time.events.add(.5*Phaser.Timer.SECOND,function(){this.canContinueToNextState=!0},this)}},{key:"update",value:function(){}},{key:"onInputDown",value:function(){this.canContinueToNextState&&this.game.state.start("level1")}}]),t}(Phaser.State);n.default=s},{}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=[{x:8900,y:500,width:50,height:500}];n.default=i},{}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=[];n.default=i},{}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=[];n.default=i},{}],13:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=e("../../prefabs/player"),u=i(l),c=e("../../prefabs/obstacle"),h=i(c),f=e("../../prefabs/enemyNav"),y=i(f),d=e("../../prefabs/enemyBasic"),p=i(d),b=e("../../prefabs/crate"),v=i(b),g=e("../../prefabs/sword"),m=i(g),w=e("./obstacles"),_=i(w),P=e("./enemyNavs"),O=i(P),x=e("./enemies"),k=i(x),j=e("./crates"),T=i(j),S=function(e){function t(e,n){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return a(t,e),s(t,[{key:"preload",value:function(){}},{key:"create",value:function(){this.game.world.setBounds(0,0,19200,1080),this.world.width=1920,this.world.height=1080,this.game.physics.arcade.gravity.y=1400,this.bitmap=this.game.add.bitmapData(this.world.width,this.world.height),this.game.add.image(0,0,this.bitmap),this.player=new u.default(this.game,9500,this.game.world.centerY),this.game.add.existing(this.player),this.game.camera.follow(this.player,Phaser.Camera.FOLLOW_TOPDOWN);var e=new m.default(this.game,Math.abs(this.player.width/2),this.player.height/2);e.y-=e.height/2,e.kill(),this.player.sword=e,this.player.addChild(e),this.obstacles=[];var t=!0,n=!1,i=void 0;try{for(var o,r=_.default[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value,s=new h.default(this.game,a.x,a.y,a.width,a.height,"crosshairs");this.game.add.existing(s),this.obstacles.push(s)}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}this.crates=[];var l=!0,c=!1,f=void 0;try{for(var d,b=T.default[Symbol.iterator]();!(l=(d=b.next()).done);l=!0){var g=d.value,w=new v.default(this.game,g.x,g.y,g.width,g.height,"crosshairs");this.game.add.existing(w),this.obstacles.push(w)}}catch(e){c=!0,f=e}finally{try{!l&&b.return&&b.return()}finally{if(c)throw f}}this.enemyNavs=[];var P=!0,x=!1,j=void 0;try{for(var S,C=O.default[Symbol.iterator]();!(P=(S=C.next()).done);P=!0){var E=S.value,M=new y.default(this.game,E.x,E.y,E.width,E.height);this.game.add.existing(M),this.enemyNavs.push(M)}}catch(e){x=!0,j=e}finally{try{!P&&C.return&&C.return()}finally{if(x)throw j}}this.enemies=[];var L=!0,D=!1,R=void 0;try{for(var F,K=k.default[Symbol.iterator]();!(L=(F=K.next()).done);L=!0){var B=F.value,N=new p.default(this.game,B.x,B.y,B.vel);N.cacheObstacles(this.obstacles),N.cachePlayer(this.player),this.game.add.existing(N),this.enemies.push(N)}}catch(e){D=!0,R=e}finally{try{!L&&K.return&&K.return()}finally{if(D)throw R}}this.bullets=[]}},{key:"update",value:function(){this.handleBulletCollisions(),this.game.physics.arcade.collide(this.player,this.obstacles,this.player.grounded,null,this.player),this.game.physics.arcade.collide(this.enemies,this.obstacles),this.game.physics.arcade.collide(this.enemies,this.enemyNavs,function(e,t){e.reverseDirection(t)});var e=[],t=!0,n=!1,i=void 0;try{for(var o,r=this.enemies[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value;this.game.physics.arcade.overlap(this.player.sword,a,function(e,t){t.eliminate()})===!1&&e.push(a)}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}var s=[],l=!0,u=!1,c=void 0;try{for(var h,f=this.enemies[Symbol.iterator]();!(l=(h=f.next()).done);l=!0){var y=h.value;null!==y.losToPlayer&&y.isShooting===!1&&s.push(y.losToPlayer)}}catch(e){u=!0,c=e}finally{try{!l&&f.return&&f.return()}finally{if(u)throw c}}this.drawLines(s),this.enemies=e}},{key:"handleBulletCollisions",value:function(){var e=this,t=!0,n=!1,i=void 0;try{for(var o,r=this.enemies[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value;this.game.physics.arcade.collide(a.weapon.bullets,this.player,function(t,n){n.kill(),e.game.state.start("gameover")},null,this),this.game.physics.arcade.collide(a.weapon.bullets,this.obstacles,function(e,t){t.kill()})}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}}},{key:"drawLines",value:function(e){this.bitmap.context.clearRect(0,0,this.world.width,this.world.height);var t=!0,n=!1,i=void 0;try{for(var o,r=e[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value;this.bitmap.context.strokeStyle="red",this.bitmap.context.beginPath(),this.bitmap.context.moveTo(a.start.x,a.start.y),this.bitmap.context.lineTo(a.end.x,a.end.y),this.bitmap.context.stroke()}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}this.bitmap.dirty=!0}},{key:"paused",value:function(){}},{key:"render",value:function(){}},{key:"shutdown",value:function(){}}]),t}(Phaser.State);n.default=S},{"../../prefabs/crate":2,"../../prefabs/enemyBasic":3,"../../prefabs/enemyNav":4,"../../prefabs/obstacle":5,"../../prefabs/player":6,"../../prefabs/sword":7,"./crates":10,"./enemies":11,"./enemyNavs":12,"./obstacles":14}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=[{x:0,y:980,width:19200,height:100},{x:800,y:0,width:50,height:300},{x:1e3,y:700,width:1200,height:50},{x:800,y:300,width:1e3,height:50},{x:2200,y:500,width:50,height:480},{x:2200,y:500,width:500,height:48},{x:2200,y:500,width:500,height:48},{x:3100,y:700,width:400,height:48},{x:3900,y:500,width:50,height:480},{x:3900,y:500,width:480,height:50},{x:5500,y:0,width:48,height:500},{x:5500,y:500,width:1e3,height:50},{x:5500,y:500,width:1e3,height:50},{x:6900,y:700,width:100,height:50},{x:7400,y:500,width:50,height:480},{x:7400,y:500,width:500,height:50},{x:8e3,y:500,width:800,height:50},{x:8800,y:500,width:50,height:500}];n.default=i},{}],15:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.asset=null,e.ready=!1,e}return r(t,e),a(t,[{key:"preload",value:function(){this.asset=this.add.sprite(.5*this.game.width-110,.5*this.game.height-10,"preloader"),this.load.setPreloadSprite(this.asset),this.load.onLoadComplete.addOnce(this.onLoadComplete,this),this.loadResources()}},{key:"loadResources",value:function(){this.game.load.image("crosshairs","assets/crosshair_red_small.png"),this.game.load.image("bullet","assets/bullet.png"),this.game.load.image("target","assets/target.png")}},{key:"onLoadComplete",value:function(){this.game.state.start("level1")}}]),t}(Phaser.State);n.default=s},{}],16:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e)}return o(e,[{key:"castRay",value:function(e,t,n){var i=new Phaser.Line(e.x,e.y,t.x,t.y),o=!0,r=!1,a=void 0;try{for(var s,l=n[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value,c=u.getEdges(),h=!0,f=!1,y=void 0;try{for(var d,p=c[Symbol.iterator]();!(h=(d=p.next()).done);h=!0){var b=d.value,v=Phaser.Line.intersects(i,b);if(v)return!0}}catch(e){f=!0,y=e}finally{try{!h&&p.return&&p.return()}finally{if(f)throw y}}}}catch(e){r=!0,a=e}finally{try{!o&&l.return&&l.return()}finally{if(r)throw a}}return!1}}]),e}();n.default=r},{}]},{},[1]);
